<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        body{
            margin:0;
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg,#f1f5f9,#e2e8f0);
            transition:0.4s;
            overflow-x:hidden;
        }

        /* ===== SIDEBAR ===== */
        .sidebar{
            height:100vh;
            width:200px;
            position:fixed;
            background: linear-gradient(180deg,#0f2027,#203a43,#2c5364);
            color:white;
            padding-top:20px;
            box-shadow: 4px 0 15px rgba(0,0,0,0.3);
        }

        .sidebar h4{
            text-align:center;
            margin-bottom:30px;
            font-weight:600;
        }

        .sidebar a{
            display:flex;
            align-items:center;
            gap:10px;
            padding:12px 20px;
            color:#cbd5e1;
            text-decoration:none;
            font-size:15px;
            transition:0.3s;
            border-left:3px solid transparent;
        }

        .sidebar a:hover{
            background: rgba(255,255,255,0.08);
            color:white;
            border-left:3px solid #38bdf8;
            padding-left:25px;
        }

        /* ===== CONTENT ===== */
        .content{
            margin-left:200px;
            padding:30px;
            animation:fadeIn 1s ease;
        }

        @keyframes fadeIn{
            from{opacity:0;}
            to{opacity:1;}
        }

        .slide-up{
            animation:slideUp 0.8s ease;
        }

        @keyframes slideUp{
            from{opacity:0; transform:translateY(40px);}
            to{opacity:1; transform:translateY(0);}
        }

        /* ===== CARDS ===== */
        .card{
            border:none;
            border-radius:15px;
            transition:0.4s;
        }

        .card:hover{
            transform:translateY(-8px);
            box-shadow:0px 15px 30px rgba(0,0,0,0.2);
        }

        /* ===== TABLE HOVER ===== */
        table tr{
            transition:0.3s;
        }

        table tr:hover{
            background:#f1f5f9;
        }

        /* ===== DARK MODE ===== */
        .dark-mode{
            background:#0b1120 !important;
            color:white !important;
        }

        .dark-mode .card{
            background:#1e293b;
            color:white;
        }

        .dark-mode .sidebar{
            background: linear-gradient(180deg,#020617,#0f172a);
        }

        .dark-mode table tr:hover{
            background:#334155;
        }

        .toggle-btn{
            border-radius:20px;
        }
        .sidebar form {
  margin: 0;  /* Form ka margin hatao */
}

.sidebar form button.logout-btn {
  all: unset;  /* Button ki default styling remove karo */
  display: flex;
  align-items: center;
  gap: 10px;            /* Icon aur text ke beech gap */
  width: 100%;          /* Pure sidebar ki width le */
  padding: 12px 20px;   /* Baaki links jaisa padding */
  color: #cbd5e1;
  font-size: 15px;
  cursor: pointer;
  border-left: 3px solid transparent;
  transition: 0.3s;
  font-family: 'Segoe UI', sans-serif;
}

.sidebar form button.logout-btn:hover {
  background: rgba(255,255,255,0.08);
  color: white;
  border-left: 3px solid #38bdf8;
  padding-left: 25px;
}

    </style>
</head>

<body>

<!-- ===== SIDEBAR ===== -->
<div class="sidebar">
    <h4>Admin Panel</h4>
    <a href="#"><i class="bi bi-speedometer2"></i> Dashboard</a>
    <a href="#"><i class="bi bi-person-plus"></i> Add Student</a>
    <a href="#"><i class="bi bi-table"></i> Records</a>
    <form method="post" action="{% url 'logout' %}">
      {% csrf_token %}
      <button type="submit" class="logout-btn">
      <i class="bi bi-box-arrow-right"></i> Logout
      </button>
   </form>

</div>

<!-- ===== MAIN CONTENT ===== -->
<div class="content">

    <!-- Top Bar -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>Welcome {{ user.username }}</h2>
        <button class="btn btn-dark toggle-btn" onclick="toggleMode()">
            <i class="bi bi-moon"></i> Dark Mode
        </button>
    </div>

    <!-- Dashboard Cards -->
    <div class="row g-4 mb-4 slide-up">
        <div class="col-md-4">
            <div class="card text-white bg-primary p-3">
                <h5>Total Students</h5>
                <h3>{{ st|length }}</h3>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card text-white bg-success p-3">
                <h5>Total Subjects</h5>
                <h3>5</h3>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card text-white bg-danger p-3">
                <h5>Active Teachers</h5>
                <h3>3</h3>
            </div>
        </div>
    </div>

    <!-- Add Student Form -->
    <div class="card p-4 mb-4 slide-up">
        <h4>Add Student</h4>
        <form method="post">
            {% csrf_token %}
            <div class="row">
                <div class="col-md-3 mb-3">
                    <input type="text" name="name" class="form-control" placeholder="Student Name" required>
                </div>
                <div class="col-md-3 mb-3">
                    <input type="text" name="teacher" class="form-control" placeholder="Teacher Name" required>
                </div>
                <div class="col-md-3 mb-3">
                    <input type="text" name="subject" class="form-control" placeholder="Subject" required>
                </div>
                <div class="col-md-3 mb-3">
                    <input type="text" name="number" class="form-control" placeholder="Number" required>
                </div>
            </div>
            <button type="submit" name="add" class="btn btn-primary">Add Student</button>
        
        </form>
    </div>

    <!-- Student Table -->
    <div class="card p-4 slide-up">
        <h4>Student Records</h4>
        <div class="table-responsive">
            <table class="table table-striped mt-3">
                <thead class="table-dark">
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Teacher</th>
                        <th>Subject</th>
                        <th>Number</th>
                        <th>Update</th>
                        <th>Delete</th>
                    </tr>
                </thead>
                <tbody>
                    {% for i in st %}
                    <tr>
                        <td>{{ i.id }}</td>
                        <td>{{ i.student_name }}</td>
                        <td>{{ i.teacher_name }}</td>
                        <td>{{ i.subject }}</td>
                        <td>{{ i.number }}</td>
                        <td>
                            <a href="{% url 'update' i.id %}" class="btn btn-warning btn-sm">Update</a>
                        </td>
                        <td>
                            <form method="post" action="{% url 'delete' i.id %}">
                                {% csrf_token %}
                                <button class="btn btn-danger btn-sm">Delete</button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
    function toggleMode(){
        document.body.classList.toggle("dark-mode");
    }
</script>

</body>
</html>
 